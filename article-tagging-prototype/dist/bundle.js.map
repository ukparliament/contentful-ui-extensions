{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/data/terms.js","src/index.js","src/lib/termMatcher.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","Promise","resolve","reject","text","children","id","$value","$","$clearBtn","$field","_terms2","default","then","nestedTerms","select2","data","placeholder","allowClear","width","matcher","_termMatcher2","window","contentfulExtension","init","extension","contentfulField","field","contentfulWindow","currentValue","getValue","updateHeight","val","trigger","on","attr","parliamentId","params","setValue","removeClass","removeAttr","addClass","preventDefault","trim","term","toLowerCase","indexOf","filteredChildren","filter","child","modifiedData","extend"],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\n\nconst termsPromise = (() => {\n  return new Promise((resolve, reject) => {\n    resolve([\n      {\n        text: \"Timings\",\n        children: [\n          { id: \"abDg67f3\", text: \"New Parliament \" },\n          { id: \"ndbs63k2\", text: \"End of a Parliament\" },\n          { id: \"ncueK234\", text: \"Queen's Speech\" },\n          { id: \"asdUnc41\", text: \"Prorogation\" },\n          { id: \"Cu2mcc24\", text: \"Sitting times\" },\n          { id: \"cnjkai12\", text: \"Typical day\" },\n          { id: \"asdjj21Q\", text: \"Recess\" }\n        ]\n      },\n      {\n        text: \"Debates and Voting\",\n        children: [\n          { id: \"jas123J1\", text: \"Rules and courtesies\" },\n          { id: \"sjdawe21\", text: \"Points of Order\" },\n          { id: \"mjajsdJ2\", text: \"Voting\" },\n          { id: \"asdjnJ41\", text: \"Speaking in a debate\" },\n          { id: \"dagh23F2\", text: \"Ending a debate\" },\n          { id: \"asdMK12e\", text: \"General debates\" },\n          { id: \"aajewe23\", text: \"Substantive motions\" },\n          { id: \"knwnJnsb\", text: \"Opposition day debates\" },\n          { id: \"aq2unbCN\", text: \"Adjournment debates\" },\n          { id: \"gihkdK2f\", text: \"Westminster Hall debate\" },\n          { id: \"bvjw1E23\", text: \"Backbench Busiess Commitete debates\" },\n          { id: \"acsmghjL\", text: \"Emergency debates\" }\n        ]\n      },\n      {\n        text: \"Questions\",\n        children: [\n          { id: \"kasdASND\", text: \"Written quesitons\" },\n          { id: \"MCNJ1md1\", text: \"Oral questions\" },\n          { id: \"caKKMN1e\", text: \"Prime Minister's questions\" },\n          { id: \"a189uMCa\", text: \"Business questions \" },\n          { id: \"gknraM12\", text: \"Urgent questions\" },\n          { id: \"CMkj1cq4\", text: \"Deadlines\" },\n          { id: \"gqmkjak5\", text: \"Rules\" },\n          { id: \"41MHgkq1\", text: \"Problems\" },\n        ]\n      },\n      {\n        text: \"Early Day Motions\",\n        children: [\n          { id: \"asdj1JCF\", text: \"Submitting an EDM\" },\n          { id: \"kjsadj1C\", text: \"Signing an EDM\" },\n          { id: \"iqpRm141\", text: \"Amending an EDM\" },\n          { id: \"aPkikm1d\", text: \"Withdrawing an EDM\" },\n          { id: \"gKA1nC12\", text: \"Rules for EDMs\" },\n          { id: \"17vmaJ12\", text: \"Publication of EDMS\" },\n          { id: \"vh151cmJ\", text: \"EDMs and delegated legislation\" }\n        ]\n      },\n      {\n        text: \"Bills and Delegated Legislation\",\n        children: [\n          { id: \"Acaj1nv1\", text: \"Bill Stages\" },\n          { id: \"jvmaca11\", text: \"Find your way around a Bill\" },\n          { id: \"8vckacCN\", text: \"Amendments\" },\n          { id: \"p1dcqCJa\", text: \"Public Bill Committees\" },\n          { id: \"p11cmcHk\", text: \"Legislation and the House of Lords\" },\n          { id: \"ajaCmnq1\", text: \"English Votes for English Laws (EVEL)\" },\n          { id: \"p1jkcn1f\", text: \"Private Members' Bills\" },\n          { id: \"ap1dlm1c\", text: \"Private and Hybrid Bills\" },\n          { id: \"APAcnn12\", text: \"Delegated Legislation\" },\n          { id: \"1021emd1\", text: \"Selection Committee\" }\n        ]\n      },\n      {\n        text: \"Petitions\",\n        children: [\n          { id: \"dtZWTcC9\", text: \"Paper Petitions\" },\n          { id: \"cXSRzVh3\", text: \"E-petitions\" },\n          { id: \"uGuRG2d5\", text: \"Petitions Committee and debates\" }\n        ]\n      },\n      {\n        text: \"Statements\",\n        children: [\n          { id: \"Ioamc124\", text: \"Oral statements\" },\n          { id: \"Poacj12G\", text: \"Written statements\" },\n          { id: \"Ilkcnas1\", text: \"Speaker's statements\" },\n          { id: \"91ucj1CB\", text: \"Select Committee statements\" },\n          { id: \"soq1kdfq\", text: \"Personal statements\" }\n        ]\n      },\n      {\n        text: \"Select Committees\",\n        children: [\n          { id: \"1j1cn3Cd\", text: \"Members\" },\n          { id: \"pCKmasn1\", text: \"Chairs\" },\n          { id: \"ColMNSD1\", text: \"Role\" },\n          { id: \"VJ1odc1C\", text: \"Meetings and papers\" },\n          { id: \"Pkacnnq1\", text: \"Inquiries and witnesses\" },\n          { id: \"INamcn1D\", text: \"Reports\" },\n          { id: \"PCLqm1cm\", text: \"Powers\" },\n          { id: \"0akcjajC\", text: \"Staff and Specialist Advisors\" },\n          { id: \"AKCJ1c1E\", text: \"Types of Select Committee\" }\n        ]\n      },\n      {\n        text: \"European Security\",\n        children: [\n          { id: \"Coqj1cnA\", text: \"European Scrutiny Committee\" },\n          { id: \"CPk1cmKa\", text: \"Debate in Chamber on European document\" },\n          { id: \"CAi1poco\", text: \"Debate in Committee on European document\" },\n          { id: \"alc1p1CL\", text: \"Other forms of EU scrutiny in the House of Commons\" },\n        ]\n      },\n      {\n        text: \"Money\",\n        children: [\n          { id: \"Gjkacjqi\", text: \"Budget\" },\n          { id: \"GOpDM2CC\", text: \"Finance Bill\" },\n          { id: \"AP1J1CSD\", text: \"Spring Statement\" },\n          { id: \"CKJ1CDEE\", text: \"Estimates\" },\n          { id: \"0c1k1ida\", text: \"Estimates days\" },\n          { id: \"sa1ckmnD\", text: \"Supply and Appropriation Bill\" },\n        ]\n      },\n      {\n        text: \"Privilege\",\n        children: [\n          { id: \"opq1kc1S\", text: \"Principles of Privilege\" },\n          { id: \"VGJ21c32\", text: \"Freedom of speech\" },\n          { id: \"8guhcMSd\", text: \"Self-regulation\" },\n          { id: \"Adfqglv1\", text: \"Other protections\" },\n          { id: \"c1cjasd1\", text: \"Infringements\" }\n        ]\n      },\n      {\n        text: \"Publications and Records\",\n        children: [\n          { id: \"8cjqacMs\", text: \"Order Paper\" },\n          { id: \"Ckj1nmc1\", text: \"Future Business\" },\n          { id: \"81uycnsS\", text: \"Hansard\" },\n          { id: \"19cjcsmm\", text: \"Votes and Proceedings\" },\n          { id: \"117dcjs3\", text: \"Standing Orders\" },\n          { id: \"s1d1dMs2\", text: \"Erskine May\" },\n          { id: \"18cmsE32\", text: \"Laid Papers\" }\n        ]\n      }\n    ]);\n  });\n});\n\nexport default termsPromise;\n","'use strict';\n\nimport termsPromise from './data/terms';\nimport termMatcher from './lib/termMatcher';\n\nvar parliamentId;\n\n// Field/result\nconst $value = $('.topic__parliament-id');\nconst $clearBtn = $('.topic__remove');\nconst $field = $('.topic__field');\n\ntermsPromise().then((nestedTerms) => {\n  // Initialiase the select2 picker\n  $field.select2({\n    data: nestedTerms,\n    placeholder: 'Choose or find a topic...',\n    allowClear: true,\n    width: 250,\n    matcher: termMatcher\n  });\n\n  window.contentfulExtension.init((extension) => {\n    var contentfulField = extension.field,\n        contentfulWindow = extension.window,\n        currentValue = contentfulField.getValue();\n\n    // Update the height\n    contentfulWindow.updateHeight();\n\n    // Set current value\n    if (currentValue !== '') {\n      $field.val(currentValue).trigger('change');\n      $value.text(currentValue);\n    }\n\n    // Event fire on select an option\n    $field.on('select2:select', (e) => {\n      $field.attr('disabled', true);\n      // Update contentful field via Promise\n      var parliamentId = e.params.data.id;\n      contentfulField.setValue(parliamentId).then(() => {\n        $value.text(parliamentId);\n        $clearBtn.removeClass('hidden');\n        $field.removeAttr('disabled');\n      });\n    });\n\n    // Event fire on clear an option\n    $field.on('select2:unselect', (e) => {\n      $field.attr('disabled', true);\n      // Update contentful field via Promise\n      contentfulField.setValue('').then(() => {\n        $value.text('(not set)');\n        $clearBtn.addClass('hidden');\n        $field.val(null).trigger('change');\n        $field.removeAttr('disabled');\n      });\n    });\n\n    // Update the height before the field is opened\n    $field.on('select2:open', (e) => {\n      // Always below\n      $('.select2-dropdown--above').removeClass('select2-dropdown--above').addClass('select2-dropdown--below');\n      contentfulWindow.updateHeight(350);\n    });\n\n    // Update the height when the field is closed\n    $field.on('select2:close', (e) => {\n      contentfulWindow.updateHeight();\n    });\n\n    // Allow clear btn to clear the option\n    $clearBtn.on('click', (e) => {\n      e.preventDefault();\n      $field.trigger('select2:unselect');\n    });\n\n    // Enable field\n    $field.removeAttr('disabled');\n    $clearBtn.removeClass('hidden');\n  });\n});","'use strict';\n\nconst termMatcher = (params, data) => {\n  // Return everything if search blank\n  if ($.trim(params.term) === '') {\n    return data;\n  }\n\n  // Return everything if parent topic matches term\n  if (data.text.toLowerCase().indexOf(params.term.toLowerCase()) !== -1) {\n    return data;\n  }\n\n  // Skip if no children\n  if (typeof(data.children) === 'undefined') {\n    return null;\n  }\n\n  // Case-insensitive filter of sub-topics\n  const filteredChildren = data.children.filter((child) => {\n    return child.text.toLowerCase().indexOf(params.term.toLowerCase()) !== -1;\n  });\n\n  // Modify and return if we have sub-topic results\n  if ( filteredChildren.length ) {\n    var modifiedData = $.extend({}, data, true);\n    modifiedData.children = filteredChildren;\n    return modifiedData;\n  };\n\n  // Nothing here\n  return null;\n};\n\nexport default termMatcher;"]}